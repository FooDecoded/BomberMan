{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/js/Bonus.js","webpack:///./public/js/Compositor.js","webpack:///./public/js/Controller.js","webpack:///./public/js/Enemy.js","webpack:///./public/js/Game.js","webpack:///./public/js/Levels.js","webpack:///./public/js/SpriteSheet.js","webpack:///./public/js/Tile.js","webpack:///./public/js/layers.js","webpack:///./public/js/loaders.js","webpack:///./public/js/sprites.js"],"names":["bonusSprites","loadBonusSprite","then","sprites","console","log","Bonus","pos","type","game","context","draw","x","y","i","bonuses","length","bonus","splice","updateBackground","Compositor","layers","forEach","layer","PRESSED","RELEASED","Controller","keyStates","Map","keyMap","keyCode","callback","set","event","has","preventDefault","keyState","get","window","eventName","addEventListener","handleEvent","Enemy","ghostSprite","vel","direction","lastDirection","excludeDirections","sprite","dirX","dirY","previousPosition","targetPosition","size","w","h","spriteLayer","createSpriteLayer","push","frameIndex","currentFrameCount","changeRoute","currentAxisCount","currentFrameIndex","animationStartPosition","changeAxis","playerDirection","frameName","getBallonFrameName","getDeadFrameName","calculateNextFrame","Math","ceil","index","round","random","distance","player","availableDirections","setPlayerDirection","detectPlayerCollision","detectWallCollision","nextDIrection","findNextDirection","myTileCorner","detectBombCollision","getToPlayer","tilesDirections","currentTile","getTileMaterial","availableDirs","filter","dir","floor","a","b","width","height","bombBox","bombs","ballonBox","intersectRect","playerBox","kill","nextPosition","tiles","material","tilePosition","tileBox","enemies","enemy","Game","canvas","document","getElementById","getContext","bonusesPercent","loadGame","update","bind","isPlaying","gameStarted","level","gameOver","alreadyLoaded","Levels","enemiesSpeed","deadSprite","position","tile","getTile","SPACE","UP","DOWN","RIGHT","LEFT","ESC","keyboardMap","up","down","left","right","space","e","moving","setBombsListener","stop","setUpLevel","toggleMenu","drawImage","pauseImg","font","fillStyle","fillText","gameOverImg","lives","handleLevelChange","bomb","comp","drawGameInfo","drawGameOver","drawMenu","requestAnimationFrame","bombsMax","bombStrength","velocity","shift","playerSpriteLayer","unshift","createBackgroundLayer","backgroundSprites","createEnimies","Promise","all","createPlayer","loadBackgroundSprites","loadGhostSprite","loadDeadSprite","loadImage","setupKeys","SpriteSheet","image","name","buffer","createElement","define","Tile","drawBonuses","woodsArray","woods","sort","bonusTypes","j","bonusesCount","placedCount","typePosition","woodSprite","drawBackground","woodArray","wallSprite","grassSprite","woodTile","drawGrassTiles","GrassBuffer","drawBackgroundLayer","entity","drawSpriteLayer","url","resolve","Image","src","loadLevel","fetch","r","json","loadPlayerSprite","loadBombSprite","ghost","loadFireSprite","fire","loadGrassSprite","grass","loadWallSprite","wall","loadWoodSprite","wood"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./public/js/Game.js\");\n","import { loadBonusSprite } from './sprites.js'\nimport {createSpriteLayer} from './layers.js'\n\nlet bonusSprites;\nloadBonusSprite().then(sprites => {\n    bonusSprites = sprites\n    console.log(bonusSprites)\n})\n\nexport default class Bonus {\n    constructor(pos, type, game){\n        this.type = type\n        this.pos = pos\n        this.game = game;\n    }\n\n    draw(context){\n        bonusSprites.draw(this.type, context, this.pos.x, this.pos.y);\n    }\n\n    remove(){\n        // console.log(this.game.bonuses.length)\n        for (let i = 0; i < this.game.bonuses.length; i++) {\n            let bonus = this.game.bonuses[i];\n            if (this == bonus) {\n                // console.log(this.game.bonuses.length)\n                this.game.bonuses.splice(i, 1);\n                // console.log(this.game.bonuses.length)\n                this.game.updateBackground = true\n            }\n        }\n    }\n}\n","export default class Compositor {\n    constructor() {\n        this.layers = [];\n    }\n\n    draw(context) {\n        this.layers.forEach(layer => {\n            layer(context);\n        });\n    }\n}\n","const PRESSED = 1;\nconst RELEASED = 0;\n\nexport default class Controller {\n    constructor() {\n        // Holds the current state of a given key\n        this.keyStates = new Map();\n\n        // Holds the callback functions for a key code\n        this.keyMap = new Map();\n    }\n\n    addMapping(keyCode, callback) {\n        this.keyMap.set(keyCode, callback);\n    }\n\n    handleEvent(event) {\n        const {keyCode} = event;\n\n        if (!this.keyMap.has(keyCode)) {\n            // Did not have key mapped.\n            return;\n        }\n\n        event.preventDefault();\n        const keyState = event.type === 'keydown' ? PRESSED : RELEASED;\n        this.keyStates.set(keyCode, keyState);\n        this.keyMap.get(keyCode)(keyState);\n    }\n\n    listenTo(window) {\n        ['keydown', 'keyup'].forEach(eventName => {\n            window.addEventListener(eventName, event => {\n                this.handleEvent(event);\n            });\n        });\n    }\n}","import { createSpriteLayer } from './layers.js';\n\n\nexport default class Enemy{\n    constructor(pos, type, ghostSprite, game, vel){\n        // debugger\n        this.pos = pos\n        this.direction = {x: 1, y: 0}\n        this.lastDirection = {x: -1, y: 0}\n        this.type = type\n        this.excludeDirections = []\n        this.sprite = ghostSprite;\n        this.game = game ;\n        this.dirX = 0\n        this.dirY = -1\n        this.previousPosition = {}\n        this.targetPosition = {}\n        if(type == 'ghost'){\n            // debugger\n            this.vel = .5 * vel\n        } else {\n            this.vel = .8 * vel\n        }\n        // this.spriteLayer = spriteLayer\n        this.size = {\n            w: 32, \n            h: 32\n        }\n        this.spriteLayer = createSpriteLayer(this);\n        this.game.layers.push(this.spriteLayer)\n        this.frameIndex = 1;\n        this.currentFrameCount = 0\n        this.changeRoute = false\n        this.currentAxisCount = 0;\n        this.currentFrameIndex = 1\n        this.animationStartPosition = {...this.pos}\n        this.changeAxis = false\n        this.playerDirection = {}\n    }\n\n    draw(context){\n        let frameName = this.type == 'ghost' ? this.getBallonFrameName() : this.getDeadFrameName() \n        this.sprite.draw(frameName, this.game.context, this.pos.x, this.pos.y);\n    }\n\n    getBallonFrameName(){\n        if(this.currentFrameCount < 75){\n            this.currentFrameCount++;\n            return `ballon-${this.frameIndex}`\n        } else {\n            this.currentFrameCount = 0;\n            if(this.frameIndex == 6){\n                this.frameIndex = 1\n                return `ballon-${this.frameIndex}`\n            } else {\n                this.frameIndex += 1\n                return `ballon-${this.frameIndex - 1}`\n            }\n        }\n    }\n\n    getDeadFrameName(){\n        if(this.direction.x == 1 && this.direction.y == 0){\n            this.calculateNextFrame()\n            return `dead-right-${Math.ceil(this.currentFrameIndex)}`\n        } else if(this.direction.x == -1 && this.direction.y == 0){\n            this.calculateNextFrame()\n            return `dead-left-${Math.ceil(this.currentFrameIndex)}`\n\n        } else if(this.direction.x == 0 && this.direction.y == 1){\n            this.calculateNextFrame()\n            return `dead-down-${Math.ceil(this.currentFrameIndex)}`\n\n        } else if(this.direction.x == 0 && this.direction.y == -1){\n            this.calculateNextFrame()\n            return `dead-top-${Math.ceil(this.currentFrameIndex)}`\n        } \n    }\n\n    calculateNextFrame(){\n        if(this.direction.x){\n             let index = Math.round(Math.random() * 3) // Math.abs(this.pos.x - this.animationStartPosition.x ) % 4\n             this.currentFrameIndex = index < 1 ? 1 : index\n        } else{\n            let index = Math.round(Math.random() * 3) // Math.abs(this.pos.y - this.animationStartPosition.y ) % 3\n            this.currentFrameIndex = index < 1 ? 1 : index\n        }\n    }\n\n    setPlayerDirection(){\n        let distance = {x: this.pos.x - this.game.player.pos.x, y: this.pos.y - this.game.player.pos.y}\n        this.playerDirection.x = distance.x < 1 ? 1 : -1\n        this.playerDirection.y = distance.y < 1 ? 1 : -1\n    }\n\n    getToPlayer(){\n        let availableDirections = this.availableDirections()\n        if(this.direction.x != 0){\n            // change to Y\n            for(let i = 0; i < availableDirections.length; i++){\n                if(availableDirections[i].y === this.playerDirection.y){\n                    // debugger\n                    this.lastDirection = {...this.direction}\n                    this.direction = {...availableDirections[i]}\n                    this.changeAxis = false;\n                }\n            }\n        } else {\n            // Change to X\n            for(let i = 0; i < availableDirections.length; i++){\n                if(availableDirections[i].x === this.playerDirection.x){\n                    // debugger\n                    this.lastDirection = {...this.direction}\n                    this.direction = {...availableDirections[i]}\n                    this.changeAxis = false;\n                }\n            }\n        }\n    }\n    \n    update() {\n        this.setPlayerDirection();\n        this.detectPlayerCollision()\n        if(this.detectWallCollision(this.direction)){\n            this.lastDirection = {x: this.direction.x * -1, y: this.direction.y * -1}\n            let nextDIrection = this.findNextDirection()\n            this.direction = nextDIrection;\n            if(!(this.direction.x == this.playerDirection.x || this.direction.y == this.playerDirection.y)){\n                // debugger\n                this.changeAxis = true;\n            }\n            this.animationStartPosition = {...this.pos}\n            this.pos.x = this.myTileCorner().x\n            this.pos.y = this.myTileCorner().y\n        } else if(this.detectBombCollision()){\n            // debugger\n            // debugger\n            this.lastDirection = {...this.direction}\n            this.direction = {x: this.direction.x * -1, y: this.direction.y * -1}\n            this.animationStartPosition = {...this.pos}\n        }  else if(this.changeAxis && this.type == 'dead'){\n            this.getToPlayer()\n        }\n        this.pos.x = this.pos.x + this.direction.x * this.vel\n        this.pos.y = this.pos.y + this.direction.y * this.vel\n    }\n\n   myTileCorner(){\n    return {\n        x: Math.round(this.pos.x / 32) * 32,\n        y: Math.round(this.pos.y / 32) * 32\n    }\n   }\n\n   availableDirections(){\n    let tilesDirections = [\n        [1,0], // right\n        [-1, 0],  // left\n        [0, -1], // up\n        [0, 1] // down\n    ]\n    let currentTile = this.myTileCorner()\n    let availableDirections = []\n    for (let i = 0; i < tilesDirections.length; i++) {\n        // const element = array[i];\n        // debugger\n        this.game.getTileMaterial({ \n            x: currentTile.x + tilesDirections[i][0] * 32 \n            , y: currentTile.y + tilesDirections[i][1] * 32 })\n            === 'grass' ? availableDirections.push({x: tilesDirections[i][0], y: tilesDirections[i][1]}) : null\n    }\n    // console.log(availableSpaces)\n    return availableDirections\n   }\n\n   findNextDirection(){\n       let availableDirs = this.availableDirections()\n        // console.log(availableDirs)\n        if(availableDirs.length === 1){\n            return availableDirs[0]\n        } else {\n            availableDirs = availableDirs.filter(dir => {\n                return !(dir.x == this.lastDirection.x && dir.y == this.lastDirection.y)\n            })\n            return availableDirs[Math.floor(Math.random()*availableDirs.length)];\n        }\n    }\n   \n   intersectRect(a, b) {\n\n    if (a.x < b.x + b.width &&\n        a.x + a.width > b.x &&\n        a.y < b.y + b.height &&\n        a.y + a.height > b.y) {\n         // collision detected!\n         return true \n     }\n     return false \n    }\n\n    detectBombCollision(){\n        let bombBox = {};\n        for(let i = 0; i < this.game.player.bombs.length ; i++){\n            // debugger\n            bombBox = {... this.game.player.bombs[i].pos}\n            bombBox.height =  this.game.player.bombs[i].size.h\n            bombBox.width =  this.game.player.bombs[i].size.w\n        }\n        var ballonBox = {...this.pos};\n        ballonBox.width = this.size.w\n        ballonBox.height = this.size.h\n        if(this.intersectRect(ballonBox, bombBox)){\n            return true\n        }\n        return false;\n    }\n\n    detectPlayerCollision(){\n        var ballonBox = {...this.pos};\n        var playerBox = {...this.game.player.pos}\n        ballonBox.width = this.size.w\n        ballonBox.height = this.size.h\n        playerBox.width = this.game.player.size.w\n        playerBox.height = this.game.player.size.h\n        if(this.intersectRect(ballonBox, playerBox)){\n            this.game.player.kill()\n        }\n    }\n\n   detectWallCollision(direction) {\n    let nextPosition = {};\n    nextPosition.x = this.pos.x + (direction.x * 2);\n    nextPosition.y = this.pos.y + (direction.y * 2);\n    nextPosition.width = 32\n    nextPosition.height = 32;\n\n    var tiles = this.game.tiles;\n    for (var i = 0; i < tiles.length; i++) {\n        if(tiles[i].material == 'grass'){\n            continue\n        }\n        var tilePosition = tiles[i].pos;\n        var tileBox = {};\n        tileBox.x = tilePosition.x ;\n        tileBox.y = tilePosition.y ;\n        tileBox.width = 32\n        tileBox.height = 32\n\n        if(this.intersectRect(nextPosition, tileBox, direction)) {\n\n            return true;\n        }\n    }\n    return false;\n}\n    remove(){\n        for (var i = 0; i < this.game.layers.length; i++) {\n            var layer = this.game.layers[i];\n            if (this.spriteLayer == layer) {\n                // debugger\n                this.game.layers.splice(i, 1);\n            }\n        }\n        for (var i = 0; i < this.game.enemies.length; i++) {\n            var enemy = this.game.enemies[i];\n            if (this == enemy) {\n                // debugger\n                this.game.enemies.splice(i, 1);\n            }\n        }\n        \n    }\n\n}\n","import Compositor from './Compositor.js';\nimport {loadBackgroundSprites} from './sprites.js';\nimport {createBackgroundLayer, createSpriteLayer} from './layers.js';\nimport createPlayer from './Player.js'\nimport Enemy from './Enemy.js'\nimport Controller from './Controller.js'\nimport Levels from './Levels.js'\nimport { loadGhostSprite, loadDeadSprite } from './sprites.js';\nimport { loadImage } from './loaders.js'\n\n\nclass Game {\n    constructor(){\n        this.canvas = document.getElementById('screen');\n        this.context = this.canvas.getContext('2d');\n        this.tiles = []\n        this.layers = null\n        this.bombs = [];\n        this.bonuses = [];\n        this.enemies = [];\n        this.bonusesPercent = 75\n        this.player = null\n        this.updateBackground = false\n        this.loadGame()\n        this.update = this.update.bind(this)\n        this.isPlaying = false\n        this.gameStarted = true\n        this.level = 1\n        this.gameOver = false\n        this.alreadyLoaded = false\n    }\n\n\n    \n    createEnimies() {\n        Levels[this.level].enemies.forEach((enemy) => {\n            if(enemy.type == 'ghost'){\n                this.enemies.push(new Enemy({...enemy.pos}, enemy.type, this.ghostSprite, this ,Levels[this.level].enemiesSpeed))\n            } else if(enemy.type == 'dead'){\n                this.enemies.push(new Enemy({...enemy.pos}, enemy.type, this.deadSprite, this, Levels[this.level].enemiesSpeed))\n            }\n            \n        })\n    }\n\n    getApproximateTile(position){\n        for (var i = 0; i < this.tiles.length; i++) {\n            var tile = this.tiles[i];\n            if (tile.pos.x > Math.floor(position.x/32) && tile.pos.y > Math.floor(position.y/32)) {\n                return tile;\n            }\n        }\n        return {material: 'grass'}\n    }\n\n    getTileMaterial(position) {\n        var tile = this.getTile(position);\n        return (tile) ? tile.material : 'grass' ;\n    }\n\n    getTile(position) {\n        for (var i = 0; i < this.tiles.length; i++) {\n            var tile = this.tiles[i];\n            if (tile.pos.x == position.x && tile.pos.y == position.y) {\n                return tile;\n            }\n        }\n    }\n\n    setupKeys(){\n        const SPACE = 32;\n        const UP = 38;\n        const DOWN = 40;\n        const RIGHT = 39;\n        const LEFT = 37;\n        const ESC = 27;\n        let keyboardMap = {\n            up: false,\n            down: false,\n            left: false,\n            right: false,\n            space: false\n        }\n        window.addEventListener('keydown', (e) => {\n            if(this.isPlaying){\n                e.preventDefault()\n                if(e.keyCode === UP){\n                    this.player.moving = true\n                    this.player.direction = {x: 0, y:-1}\n                } else if(e.keyCode === DOWN){\n                    this.player.moving = true\n                    this.player.direction = {x: 0, y:1}\n    \n                } else if (e.keyCode === RIGHT){\n                    this.player.moving = true\n                    this.player.direction = {x: 1, y:0}\n    \n                } else if(e.keyCode === LEFT) {\n                    this.player.moving = true\n                    this.player.direction = {x: -1, y:0}\n                } else if(e.keyCode === SPACE) {\n                    this.player.setBombsListener();\n                    this.player.update()\n                } \n            }\n        })\n\n        window.addEventListener('keyup', (e) => {\n            if(this.isPlaying){\n                if(e.keyCode === UP){\n                    keyboardMap.up = false\n                    this.player.stop()\n                } else if(e.keyCode === DOWN){\n                    keyboardMap.down = false\n                    this.player.stop()\n                } else if (e.keyCode === RIGHT){\n                    keyboardMap.right = false\n                    this.player.stop()\n                } else if(e.keyCode === LEFT) {\n                    keyboardMap.left = false\n                    this.player.stop()\n                } \n            }\n            if(e.keyCode === ESC){\n                if(this.gameOver){\n                    // debugger\n                    this.level = 1\n                    // this.loadGame()\n                    this.setUpLevel()\n                } else {\n                    this.toggleMenu()\n                }\n            }\n        })\n    }\n\n    emptyScreen(){\n        this.layers = []\n    }\n\n    toggleMenu(){\n        if(this.isPlaying){\n            this.isPlaying = false\n        } else {\n            this.isPlaying = true\n        }\n    }\n\n    drawMenu(){ \n        this.context.drawImage(this.pauseImg, 240, 170)\n        this.context.font = \"bold 30px Georgia\";\n        this.context.fillStyle = 'black';\n        this.context.fillText(`Hit 'ESC' to continue`, 130, 200 + 60);\n    }\n\n    drawGameOver(){\n        this.context.drawImage(this.gameOverImg, 200, 150);\n        this.context.font = \"bold 30px Georgia\";\n        this.context.fillStyle = 'black';\n        this.context.fillText(`Hit 'ESC' to try again!`, 130, 200 + 95);\n    }\n\n    handleLevelChange(){\n        this.level += 1\n        this.setUpLevel()\n    }\n\n    drawGameInfo(){\n        // this.context.fillStyle = \"#E5AA2B\"\n        this.context.font = \"bold 20px Georgia\";\n        this.context.fillStyle = '#CAC7C2';\n        this.context.fillText(`Level: ${this.level}  Hearts: ${this.player.lives}`, 200, 20);\n    }\n\n    update(){\n\n        if(this.isPlaying){\n            if(!this.player.lives <= 0 && !this.gameOver){\n                if(this.enemies.length == 0 && !this.gameOver){\n                    this.handleLevelChange()\n                }\n                // debugger\n                // console.log('innnnnnnnnnnnnnnn')\n                // debugger\n                this.bombs.forEach(bomb => bomb.update())\n                this.enemies.forEach(enemy => enemy.update())\n                this.player.update()\n                this.comp.draw(this.context);\n                this.drawGameInfo()\n            } else {\n                this.comp.draw(this.context);\n                this.drawGameOver()\n            }\n        }\n        else if(!this.isPlaying && !this.gameOver) {\n            this.comp.draw(this.context)\n            this.drawMenu()\n        } else if (this.gameOver && !this.isPlaying){\n            this.drawGameOver()\n        }\n        requestAnimationFrame(this.update);\n    }\n\n    showMenu(){\n\n    }\n\n    setUpLevel(){\n        this.player.pos = {\n            x: 32,\n            y: 32\n        }\n        this.player.bombsMax = 1\n        this.player.bombStrength = 1\n        this.player.velocity = 1\n        this.bonuses = []\n        this.bombs = []\n        this.tiles = []\n        this.enemies = []\n        this.level > 1 && this.layers.shift()\n        // debugger\n        if(this.gameOver){\n            this.comp.layers = []\n            this.layers = this.comp.layers ;\n            this.layers.push(this.playerSpriteLayer)\n            this.gameOver = false;\n            this.isPlaying = true;\n            this.player.lives = 3;\n        }\n        this.layers.unshift(createBackgroundLayer(this.backgroundSprites, this.tiles, this));\n        // debugger\n        this.createEnimies()\n        if(!this.gameOver && !this.alreadyLoaded){\n            this.update()\n            this.alreadyLoaded = true \n            this.isPlaying = false\n        }\n    }\n\n\n    loadGame(){\n        Promise.all([\n            createPlayer(this),\n            loadBackgroundSprites(),\n            loadGhostSprite(), \n            loadDeadSprite(),\n            loadImage('/img/pause.png'),\n            loadImage('/img/game-over.png')\n        ])\n        .then(([player, backgroundSprites, ghostSprite, deadSprite, pauseImg, gameOverImg]) => {\n            // debugger\n            this.pauseImg = pauseImg;\n            this.ghostSprite = ghostSprite;\n            this.deadSprite = deadSprite;\n            this.gameOverImg = gameOverImg\n            this.enemies = []\n            this.bombs = []\n            this.gameOver = false\n            this.isPlaying = true;\n            !this.alreadyLoaded && this.setupKeys()        \n            this.comp = new Compositor();\n            this.layers = this.comp.layers;\n            this.playerSpriteLayer = createSpriteLayer(player);\n            this.layers.push(this.playerSpriteLayer);\n            this.player = player;\n            this.backgroundSprites = backgroundSprites;\n            this.setUpLevel()\n        })\n\n    }\n\n\n    \n}\n\nnew Game();\n\n\n\n","\nconst Levels = {\n    1: {\n        bonusesPercent: 75,\n        enemies: [{pos: {x: 32 * 15, y: 32}, type: 'ghost'}, {pos: {x: 32, y: 32 * 11}, type: 'ghost'}, {pos: {x: 32 * 15, y: 32 * 11}, type: 'ghost'}],\n        enemiesSpeed: 1\n    },\n    2: {\n        bonusesPercent: 65,\n        enemies: [{pos: {x: 32 * 15, y: 32}, type: 'ghost'}, {pos: {x: 32, y: 32 * 11}, type: 'ghost'}, {pos: {x: 32 * 15, y: 32 * 11}, type: 'ghost'}\n        , {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 9}, type: 'dead'}\n            ],\n        enemiesSpeed: 1\n    },\n    3: {\n        bonusesPercent: 65,\n        enemies: [{pos: {x: 32 * 15, y: 32}, type: 'ghost'}, {pos: {x: 32, y: 32 * 11}, type: 'ghost'}, {pos: {x: 32 * 15, y: 32 * 11}, type: 'ghost'}\n        , {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 9}, type: 'dead'},\n        {pos: {x: 32 * 13, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}\n            ],\n        enemiesSpeed: 2\n    },\n    4: {\n        bonusesPercent: 65,\n        enemies: [{pos: {x: 32 * 15, y: 32}, type: 'ghost'}, {pos: {x: 32, y: 32 * 11}, type: 'ghost'}, {pos: {x: 32 * 15, y: 32 * 11}, type: 'ghost'}\n        , {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 9}, type: 'dead'},\n        {pos: {x: 32 * 13, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}\n            ],\n        enemiesSpeed: 3\n    },\n    5: {\n        bonusesPercent: 65,\n        enemies: [{pos: {x: 32 * 15, y: 32}, type: 'ghost'}, {pos: {x: 32, y: 32 * 11}, type: 'ghost'}, {pos: {x: 32 * 15, y: 32 * 11}, type: 'ghost'}\n        , {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 9}, type: 'dead'},\n        {pos: {x: 32 * 13, y: 32 * 3}, type: 'dead'}, {pos: {x: 32 * 11, y: 32 * 3}, type: 'dead'}\n            ],\n        enemiesSpeed: 3\n    }\n}\n\n\nexport default Levels;","export default class SpriteSheet {\n    constructor(image, width, height) {\n        this.image = image;\n        this.width = width;\n        this.height = height;\n        this.tiles = new Map();\n    }\n\n    define(name, x, y, width, height) {\n        const buffer = document.createElement('canvas');\n        buffer.width = width;\n        buffer.height = height;\n        buffer\n            .getContext('2d')\n            .drawImage(\n                this.image,\n                x,\n                y,\n                width,\n                height,\n                0,\n                0,\n                width,\n                height);\n        this.tiles.set(name, buffer)\n    }\n\n    defineTile(name, x, y) {\n        this.define(\n            name,\n            x * this.width,\n            y * this.height,\n            this.width,\n            this.height);\n    }\n\n    draw(name, context, x, y) {\n        const buffer = this.tiles.get(name);\n        // debugger\n        context.drawImage(buffer, x, y);\n    }\n\n    drawTile(name, context, x, y) {\n        this.draw(name, context, x * this.width, y * this.height);\n    }\n}\n","export default class Tile {\n    constructor(pos, material, game){\n        this.pos = pos\n        this.material = material\n        this.game = game\n    }\n\n    remove(){\n        for (var i = 0; i < this.game.tiles.length; i++) {\n            var tile = this.game.tiles[i];\n            if (this == tile) {\n                this.game.tiles.splice(i, 1);\n            }\n        }\n        this.game.updateBackground = true;\n    }\n\n}","import Tile from './Tile.js'\nimport Bonus from './Bonus.js'\n\n\n\nfunction drawBonuses(context, sprites, woodsArray, game, ) {\n    let woods = [...woodsArray]\n    woods.sort(function() {\n        return 0.5 - Math.random();\n    });\n    let bonusesPercent = game.bonusesPercent;\n    let bonusTypes = ['speed', 'bomb', 'fire']\n    for (var j = 0; j < 4; j++) {\n        var bonusesCount = Math.round(woods.length * bonusesPercent * 0.01 / 4);\n        var placedCount = 0;\n        for (var i = 0; i < woods.length; i++) {\n            if (placedCount > bonusesCount) {\n                break;\n            }\n\n            var tile = woods[i];\n            if ((j == 0 && tile.pos.x < 32 / 2 && tile.pos.y < 32 / 2)\n                || (j == 1 && tile.pos.x < 32 / 2 && tile.pos.y > 32 / 2)\n                || (j == 2 && tile.pos.x > 32 / 2 && tile.pos.y < 32 / 2)\n                || (j == 3 && tile.pos.x > 32 / 2 && tile.pos.y > 32 / 2)) {\n\n                var typePosition = bonusTypes[placedCount % 3];\n                var bonus = new Bonus({...tile.pos}, typePosition, game);\n                game.bonuses.push(bonus);\n                \n                sprites.woodSprite.draw('wood', context, tile.pos.x , tile.pos.y)\n                placedCount++;\n            }\n        }\n    }\n}\n\nfunction drawBackground(context, sprites, tiles, game) {\n    let bonusTypes = ['speed', 'bomb', 'fire']\n    let woodArray = []\n    for (var y= 0; y< 13; y++) {\n        for (var x = 0;x < 17;x++) {\n            if ((y== 0 ||x == 0 || y== 13 - 1 ||x == 17 - 1)\n                || (x % 2 == 0 && y% 2 == 0)) {\n                sprites.wallSprite.draw('wall', context,x * 32 , y* 32)\n                tiles.push(new Tile({x:x * 32, y: y* 32}, 'wall', game))\n            } else {\n                sprites.grassSprite.draw('grass', context,x * 32, y* 32)\n                if((x > 3 && x < 13) && (y == 1 || y == 11 )){\n                    sprites.woodSprite.draw('wood', context,x * 32, y* 32)\n                    let woodTile = new Tile({x:x * 32, y: y* 32}, 'wood', game)\n                    tiles.push(woodTile)  \n                    woodArray.push(woodTile)  \n                }\n                if(( (y == 7 || y == 5) && !(x == 3 || x == 13) )){\n                    sprites.woodSprite.draw('wood', context,x * 32, y* 32)\n                    let woodTile = new Tile({x:x * 32, y: y* 32}, 'wood', game)\n                    tiles.push(woodTile)  \n                    woodArray.push(woodTile)  \n                }\n                if(( x == 3 || x == 13 )){\n                    sprites.woodSprite.draw('wood', context,x * 32, y* 32)\n                    let woodTile = new Tile({x:x * 32, y: y* 32}, 'wood', game)\n                    tiles.push(woodTile)  \n                    woodArray.push(woodTile)  \n                }\n            }\n        }\n    }\n    drawBonuses(context, sprites, woodArray, game)\n}\n\n\nfunction updateBackground(context, tiles, sprites, bonuses){\n    bonuses.forEach((bonus) => {\n        // bonus\n        bonus.draw(context)\n    })\n    tiles.forEach(tile => {\n        // debugger\n        if(tile.material == 'wood'){\n            sprites.woodSprite.draw('wood', context, tile.pos.x, tile.pos.y)\n        } else if(tile.material == 'wall'){\n            // debugger\n            sprites.wallSprite.draw('wall', context, tile.pos.x, tile.pos.y)\n        }\n    })\n}\n\nfunction drawGrassTiles(sprite, context){\n    for(let x = 0; x < 17; x++){\n        for (let y = 0; y < 13; y++) {\n            sprite.draw('grass', context, x * 32, y * 32)            \n        }\n    }\n}\n\nexport function createBackgroundLayer(backgroundSprites, tiles, game) {\n    const buffer = document.createElement('canvas');\n    buffer.width = 816;\n    buffer.height = 624;\n    const GrassBuffer = document.createElement('canvas');\n    GrassBuffer.width = 816;\n    GrassBuffer.height = 624;\n    drawGrassTiles(backgroundSprites.grassSprite, GrassBuffer.getContext('2d'))\n    drawBackground(buffer.getContext('2d'), backgroundSprites, tiles, game)\n\n    return function drawBackgroundLayer(context) {\n        if(game.updateBackground){\n            // console.log(game.bombs.length)\n            buffer.getContext('2d').drawImage(GrassBuffer, 0, 0)\n            updateBackground(buffer.getContext('2d'), tiles, backgroundSprites, game.bonuses)\n            game.updateBackground = false\n        }\n        context.drawImage(buffer, 0, 0);\n    };\n}\n\nexport function createSpriteLayer(entity) {\n    return function drawSpriteLayer(context) {\n        entity.draw(context);\n    };\n}","export function loadImage(url) {\n    return new Promise(resolve => {\n        const image = new Image();\n        image.addEventListener('load', () => {\n            resolve(image);\n        });\n        image.src = url;\n    });\n}\n\nexport function loadLevel(name) {\n    return fetch(`/levels/${name}.json`)\n    .then(r => r.json());\n}\n\n","import SpriteSheet from './SpriteSheet.js';\nimport {loadImage} from './loaders.js';\n\nexport function loadPlayerSprite() {\n    return loadImage('/img/player.png')\n    .then(image => {\n        const player = new SpriteSheet(image, 24, 24);\n        player.define('idle', 0, 0, 24, 24);\n        player.define('left-0', 0, 24, 24, 24);\n        player.define('left-1', 24, 24, 24, 24);\n        player.define('left-2', 48, 24, 24, 24);\n\n        player.define('right-0', 0, 48, 24, 24);\n        player.define('right-1', 24, 48, 24, 24);\n        player.define('right-2', 48, 48, 24, 24);\n\n        player.define('down-0', 0, 0, 24, 24);\n        player.define('down-1', 24 ,0, 24, 24);\n        player.define('down-2', 48 , 0, 24, 24);\n\n        player.define('top-0', 0, 72, 24, 24);\n        player.define('top-1', 24 , 72, 24, 24);\n        player.define('top-2', 48, 72, 24, 24);\n        return player;\n    });\n}\n\nexport function loadBombSprite(){\n    return loadImage('/img/bomb.png')\n    .then(image => {\n        const bomb = new SpriteSheet(image, 28, 28);\n        bomb.define('bomb', 0, 0, 28, 28);\n        return bomb;\n    });\n}\n\nexport function loadBonusSprite(){\n    return loadImage('/img/bonuses.png')\n    .then(image => {\n        const bonuses = new SpriteSheet(image, 32, 32);\n        bonuses.define('speed', 0, 0, 32, 32);\n        bonuses.define('bomb', 32, 0, 32, 32);\n        bonuses.define('fire', 64, 0, 32, 32);\n        return bonuses;\n    });\n}\n\nexport function loadGhostSprite(){\n    return loadImage('/img/enemy.png')\n    .then(image => {\n        const ghost = new SpriteSheet(image, 24, 24);\n        ghost.define('ballon-1', 0, 24, 24, 24);\n        ghost.define('ballon-2', 24, 24, 24, 24);\n        ghost.define('ballon-3', 48, 24, 24, 24);\n        ghost.define('ballon-4', 0, 48, 24, 24);\n        ghost.define('ballon-5', 24, 48, 24, 24);\n        ghost.define('ballon-6', 48, 48, 24, 24);\n        return ghost;\n    });\n}\n\nexport function loadDeadSprite(){\n    return loadImage('/img/dead.png')\n    .then(image => {\n        const ghost = new SpriteSheet(image, 32, 32);\n        ghost.define('dead-left-1', 0, 32 * 3, 32, 32);\n        ghost.define('dead-left-2', 32, 32 * 3, 32, 32);\n        ghost.define('dead-left-3', 32 * 2, 32 * 3, 32, 32);\n        ghost.define('dead-right-1', 0, 32, 32, 32);\n        ghost.define('dead-right-2', 32, 32, 32, 32);\n        ghost.define('dead-right-3', 32 * 2, 32 , 32, 32);\n        ghost.define('dead-top-1', 0, 0, 32, 32);\n        ghost.define('dead-top-2', 32, 0, 32, 32);\n        ghost.define('dead-top-3', 32 * 2, 0, 32, 32);\n        ghost.define('dead-down-1', 0, 64, 32, 32);\n        ghost.define('dead-down-2', 32, 64 , 32, 32);\n        ghost.define('dead-down-3', 32 * 2, 64 , 32, 32);\n        return ghost;\n    });\n}\n\nexport function loadFireSprite(){\n    return loadImage('/img/fire.png')\n    .then(image => {\n        const fire = new SpriteSheet(image, 28, 28);\n        fire.define('fire', 0, 0, 28, 28);\n        return fire;\n    });\n}\n\nfunction loadGrassSprite(){\n    return loadImage('/img/tile_grass.png')\n    .then(image => {\n        const grass = new SpriteSheet(image, 32, 32);\n        grass.define('grass', 0, 0, 32, 32);\n        return grass;\n    });\n}\n\nfunction loadWallSprite(){\n    return loadImage('/img/tile_wall.png')\n    .then(image => {\n        const wall = new SpriteSheet(image, 32, 32);\n        wall.define('wall', 0, 0, 32, 32);\n        return wall;\n    });\n}\n\nfunction loadWoodSprite(){\n    return loadImage('/img/tile_wood.png')\n    .then(image => {\n        const wood = new SpriteSheet(image, 32, 32);\n        wood.define('wood', 0, 0, 32, 32);\n        return wood;\n    });\n}\n\n// Promise.all([\n//     loadGrassSprite(),\n//     loadWallSprite(),\n//     loadWoodSprite(),\n// ])\n// .then(([grassSprite, wallSprite, woodSprite]) => {\n\n// })\n\nexport function loadBackgroundSprites() {\n    return Promise.all([\n        loadGrassSprite(),\n        loadWallSprite(),\n        loadWoodSprite(),\n    ])\n    .then(([grassSprite, wallSprite, woodSprite]) => {\n        return {\n            grassSprite,\n            wallSprite,\n            woodSprite        }\n    })\n}\n"],"sourceRoot":""}